# 🏥 Hospital Spider 部署检查清单

## 📋 部署前准备

### ✅ 已完成的项目
- [x] 所有配置文件已创建
- [x] 代码已提交到 GitHub
- [x] render.yaml 配置完成
- [x] Docker 文件已准备
- [x] 环境变量模板已创建

## 🚀 手动操作步骤

### 第一步：将 GitHub 仓库设为公开

**操作时间：2-3分钟**

1. **打开 GitHub 仓库页面**
   - 访问：https://github.com/Sidneygao/Hospital_Spider
   - 确保已登录您的 GitHub 账户

2. **进入设置页面**
   - 点击仓库页面顶部的 "Settings" 标签
   - 在左侧菜单中点击 "General"

3. **更改仓库可见性**
   - 向下滚动到页面底部的 "Danger Zone"
   - 找到 "Change repository visibility"
   - 点击该按钮

4. **确认更改**
   - 在弹出的对话框中选择 "Make public"
   - 在确认框中输入仓库名称：`Hospital_Spider`
   - 点击 "I understand, change repository visibility"

**✅ 完成标志：** 仓库页面显示 "Public" 标签

---

### 第二步：在 Render 创建 Blueprint

**操作时间：5-10分钟**

1. **登录 Render 控制台**
   - 访问：https://dashboard.render.com
   - 使用您的 GitHub 账户登录

2. **创建新的 Blueprint**
   - 点击页面右上角的 "New" 按钮
   - 在下拉菜单中选择 "Blueprint"
   - 如果是第一次使用，点击 "Connect account" 连接 GitHub

3. **选择仓库**
   - 在仓库列表中找到 "Hospital_Spider"
   - 点击 "Connect" 按钮连接仓库

4. **配置 Blueprint**
   - Render 会自动检测 `render.yaml` 文件
   - 确认配置无误后，点击 "Apply" 按钮
   - 等待 Blueprint 创建完成

**✅ 完成标志：** 在 Render 控制台看到两个新服务（backend 和 frontend）

---

### 第三步：设置环境变量

**操作时间：3-5分钟**

#### 后端服务环境变量

1. **进入后端服务设置**
   - 在 Render 控制台找到 "hospital-spider-backend" 服务
   - 点击服务名称进入详情页

2. **添加环境变量**
   - 点击 "Environment" 标签
   - 点击 "Add Environment Variable" 按钮
   - 依次添加以下变量：

   ```
   变量名: AMAP_API_KEY
   变量值: 您的高德地图API密钥
   ```

   ```
   变量名: PORT
   变量值: 8080
   ```

   ```
   变量名: GIN_MODE
   变量值: release
   ```

#### 前端服务环境变量

1. **进入前端服务设置**
   - 在 Render 控制台找到 "hospital-spider-frontend" 服务
   - 点击服务名称进入详情页

2. **添加环境变量**
   - 点击 "Environment" 标签
   - 点击 "Add Environment Variable" 按钮
   - 添加以下变量：

   ```
   变量名: REACT_APP_API_URL
   变量值: https://hospital-spider-backend.onrender.com
   ```

**✅ 完成标志：** 两个服务都显示环境变量已设置

---

### 第四步：等待部署完成

**等待时间：10-15分钟**

1. **监控构建状态**
   - 在 Render 控制台查看两个服务的构建状态
   - 后端服务会显示 "Building" 然后变为 "Live"
   - 前端服务会显示 "Building" 然后变为 "Live"

2. **检查服务URL**
   - 后端服务URL格式：`https://hospital-spider-backend.onrender.com`
   - 前端服务URL格式：`https://hospital-spider-frontend.onrender.com`

**✅ 完成标志：** 两个服务都显示绿色 "Live" 状态

---

### 第五步：验证部署

**操作时间：2-3分钟**

1. **运行验证脚本**
   ```bash
   python verify_deployment.py
   ```

2. **手动测试**
   - 访问前端服务URL
   - 尝试搜索医院功能
   - 检查后端API是否响应

**✅ 完成标志：** 验证脚本显示所有服务正常

---

## 🔧 故障排除

### 常见问题及解决方案

#### 1. 仓库访问错误
**症状：** Render 显示 "don't have access to your repo"
**解决：** 确保仓库已设为公开

#### 2. 构建失败
**症状：** 服务显示 "Build Failed"
**解决：** 
- 检查 Go 版本兼容性
- 确认所有依赖都在 go.mod 中
- 检查 Node.js 版本

#### 3. 环境变量错误
**症状：** 服务启动但API调用失败
**解决：**
- 确认 AMAP_API_KEY 已正确设置
- 检查 REACT_APP_API_URL 指向正确的后端URL

#### 4. CORS 错误
**症状：** 前端无法调用后端API
**解决：**
- 确认后端已配置允许所有来源
- 检查前端API URL是否正确

---

## 📞 获取帮助

如果遇到问题：

1. **检查 Render 日志**
   - 在服务详情页点击 "Logs" 标签
   - 查看构建和运行日志

2. **验证本地开发**
   ```bash
   # 测试后端
   cd backend && go run main.go
   
   # 测试前端
   cd frontend && npm start
   ```

3. **联系支持**
   - Render 支持：https://render.com/docs/help
   - GitHub 问题：在仓库中创建 Issue

---

## 🎉 部署成功标志

当您看到以下内容时，说明部署成功：

- ✅ 两个服务都显示 "Live" 状态
- ✅ 验证脚本显示所有检查通过
- ✅ 可以正常访问前端应用
- ✅ 医院搜索功能正常工作

**恭喜！您的医院推荐系统已成功部署到 Render！** 🏥✨ 
# 医院爬虫项目需求文档

## 一、项目背景与目标

本项目旨在为用户提供基于地理位置的医院智能推荐服务。用户可通过定位或输入关键地标，系统自动按地理便利性、官方评级、用户评论等多维度聚合，推荐附近优质医院，并展示详细信息，提升就医决策效率。

## 二、核心功能需求

1. **地理位置医院检索**
   - 支持用户输入地标或自动定位，按1KM步进（至10KM）检索附近医院。
   - 拉取医院基础信息（名称、地址、经纬度、类型、电话、重点科室、营业时间、资质等）。

2. **多源评级与评论聚合**
   - 集成官方评级机构数据，支持多来源置信度加权。
   - 聚合消费评分网站评论，采用正态分布分析法评估置信度。
   - 综合地理便利性、官方评级、用户评论等因素，输出前10优选医院。

3. **医院详情与地图展示**
   - 医院卡片展示基础信息、聚合评分/评级、资质。
   - 详情页展示地图（初期为静态缓存图片）、评分/评级/资质详情。

4. **用户与管理员交互**
   - 支持用户和管理员在详情页评论、评级、备注，信息实时反映。

5. **数据缓存与更新**
   - 初期以缓存为主，支持API请求结果缓存，后续支持在线搜索与即时计算。

## 三、关键数据依赖

- 地理系统：Google Map（API Key已配置）
- 评级系统：各国官方评级机构数据源
- 评论系统：各国代表性评论网站

## 四、系统架构与主要模块

1. **数据采集层**
   - Google Maps爬虫模块
   - 医院评级数据爬虫模块
   - 用户评论爬虫模块
   - 数据更新与缓存管理模块

2. **后端API服务**
   - 医院查询API
   - 地理位置服务API
   - 评级与评论聚合API
   - 用户反馈API

3. **数据处理模块**
   - 地理距离计算引擎
   - 评级置信度模型
   - 综合排名算法
   - 数据清洗与标准化

4. **前端展示层**
   - 搜索界面、医院列表、医院详情、地图交互组件

5. **用户交互模块**
   - 用户评论系统、评分反馈系统、位置选择器

## 五、数据流程

1. 用户输入地标或定位 → 2. 系统按地理范围检索医院 → 3. 爬虫拉取医院基础信息、评级、评论 → 4. 数据处理模块聚合与排序 → 5. 前端展示医院卡片与详情 → 6. 用户可交互反馈

## 六、前端与UI设计

- 初期以地标输入为主（如曼谷四面佛），逐步完善交互。
- 医院卡片展示关键信息，详情页支持地图与详细评分展示。

## 七、部署与调试

- 初期本地调试，后续上传Github并用Render部署。

## 八、未来扩展

- 支持更多国家和地区的数据源接入。
- 实现在线搜索与即时计算，提升实时性和准确性。
- 丰富前端交互与可视化体验。 